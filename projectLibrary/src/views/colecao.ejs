<%- include('includes/head') %>
<%- include('includes/nav') %>

<div class="container ">
    <div class="row">
        <div class="col-lg-1"></div>
        <div class="col-lg-10 my-3">
            <h1 class="text-center">Minha coleção de Livros</h1>
            <p class="text-center lead">Seus livros estão abaixo</p>

            <%- include('includes/messages'); %>

            <% if(livros.length > 0) { %>
            <div class="responsive-table">
                <table class="table my-3 table-dark table-striped table-bordered">
                    <tr>
                        <td class="col-lg-3">Nome</td>
                        <td>Categoria</td>
                        <td>cap atual</td>
                        <td>caps totais</td>
                        <td>% de leitura</td>
                    </tr>
                    <% livros.forEach(livro => { %>
                    <tr>
                        <td><%= livro.titulo %></td>
                        <td><%= livro.categoria %></td>
                        <td><%= livro.capituloatu %></td>
                        <td><%= livro.capitulostot %></td>
                        <td><%= (Number(livro.capituloatu) / Number(livro.capitulostot) * 100).toFixed(2)   %>%</td>
                        <td><a href="http://localhost:3000/livros/colecao/<%= livro._id %>">Editar</a></td>
                        <td><a class="text-danger" href="http://localhost:3000/livros/colecao/delete/<%= livro._id %>">Excluir</a></td>
                    </tr>
                    <% }); %>
                </table>
                <% } else { %>
                <p class="text-center lead">Não Existem livros na sua coleção</p>
                <% } %>
            </div>
        </div>
        <div class="col-lg-1"></div>
    </div>
</div>

<%- include('includes/footer') %>